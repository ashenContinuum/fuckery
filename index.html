<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>7‑Minute Workout Timer</title>

  <!-- --------------------------------------------------------------
       Simple styling – feel free to change colours / fonts.
       -------------------------------------------------------------- -->
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        Helvetica, Arial, sans-serif;
      background: #f0f4f8;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    h1 {
      margin-bottom: 0.5rem;
    }

    #timer {
      font-size: 6rem;
      font-weight: bold;
      margin: 1rem 0;
    }

    #phase {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    button {
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      background: #0077cc;
      color: white;
      cursor: pointer;
    }
    button:hover { background: #005fa3; }

    /* Simple responsive tweak */
    @media (max-width: 600px) {
      #timer { font-size: 4rem; }
    }
  </style>
</head>

<body>
  <h1>7‑Minute Workout Timer</h1>

  <!-- Text that tells you if you’re working or resting -->
  <div id="phase">Ready?</div>

  <!-- Big countdown number -->
  <div id="timer">00</div>

  <!-- Start / Stop button -->
  <button id="toggleBtn">Start</button>

  <!-- --------------------------------------------------------------
       Audio elements – hidden, we just trigger them from JS.
       You can replace the src URLs with your own files if you like.
       -------------------------------------------------------------- -->
  <!-- Whistle: played at the start and end of each work interval -->
  <audio id="whistle" preload="auto"
    src="https://raw.githubusercontent.com/mdn/learning-area/master/html/multimedia-and-embedding/audio/whistle.mp3">
    Your browser does not support the &lt;audio&gt; element.
  </audio>

  <!-- Tick: one short click per second during the 30‑second work phase -->
  <audio id="tick" preload="auto"
    src="https://raw.githubusercontent.com/mdn/learning-area/master/html/multimedia-and-embedding/audio/tick.wav">
    Your browser does not support the &lt;audio&gt; element.
  </audio>

  <!-- --------------------------------------------------------------
       JavaScript – all the timer logic lives here.
       -------------------------------------------------------------- -->
  <script>
    // -----------------------------------------------------------------
    // Configuration constants (easy to tweak)
    // -----------------------------------------------------------------
    const WORK_SECONDS = 30;   // length of a work interval
    const REST_SECONDS = 10;   // length of a rest interval

    // -----------------------------------------------------------------
    // Grab UI elements once, so we don’t query the DOM repeatedly.
    // -----------------------------------------------------------------
    const timerEl   = document.getElementById('timer');
    const phaseEl   = document.getElementById('phase');
    const buttonEl  = document.getElementById('toggleBtn');

    // Audio objects – we’ll call .play() on them later
    const whistleAudio = document.getElementById('whistle');
    const tickAudio    = document.getElementById('tick');

    // -----------------------------------------------------------------
    // State variables that keep track of where we are in the cycle.
    // -----------------------------------------------------------------
    let intervalID = null;      // ID returned by setInterval()
    let secondsLeft = 0;        // countdown value shown on screen
    let isWorking   = false;    // true → work phase, false → rest phase
    let isRunning   = false;    // true while the timer is ticking

    /**
     * Format a number as two‑digit string (e.g. 5 → "05").
     */
    function pad(num) {
      return num.toString().padStart(2, '0');
    }

    /**
     * Update UI to reflect current phase and remaining seconds.
     */
    function render() {
      timerEl.textContent = pad(secondsLeft);
      phaseEl.textContent = isWorking ? 'Work' : (isRunning ? 'Rest' : 'Ready?');
    }

    /**
     * Start a new work interval:
     *   - set secondsLeft to WORK_SECONDS,
     *   - play the starting whistle,
     *   - mark that we are in "work" mode.
     */
    function startWork() {
      isWorking = true;
      secondsLeft = WORK_SECONDS;
      whistleAudio.currentTime = 0; // rewind in case it was still playing
      whistleAudio.play();
      render();
    }

    /**
     * Start a rest interval:
     *   - set secondsLeft to REST_SECONDS,
     *   - mark that we are NOT working.
     */
    function startRest() {
      isWorking = false;
      secondsLeft = REST_SECONDS;
      render();
    }

    /**
     * This runs once per second while the timer is active.
     * It decrements the counter and decides when to switch phases.
     */
    function tick() {
      // If we are in a work phase, play the ticking sound each second.
      if (isWorking) {
        // CloneNode trick forces the audio to replay even if it’s still playing.
        const click = tickAudio.cloneNode();
        click.play();
      }

      secondsLeft--;

      // When the counter reaches zero we need to flip between work/rest.
      if (secondsLeft <= 0) {
        if (isWorking) {
          // End of a work interval → play ending whistle then start rest.
          whistleAudio.currentTime = 0;
          whistleAudio.play();
          startRest();
        } else {
          // End of a rest interval → automatically begin the next work block.
          startWork();
        }
      }

      render(); // keep UI in sync
    }

    /**
     * Start the whole cycle (work → rest → work …) or pause it.
     */
    function toggleTimer() {
      if (!isRunning) {
        // ----------- START ----------
        isRunning = true;
        buttonEl.textContent = 'Pause';

        // If we’re starting from a completely stopped state,
        // initialise the first work block.
        if (secondsLeft === 0 && !intervalID) {
          startWork();
        }

        // setInterval will call tick() once per second.
        intervalID = setInterval(tick, 1000);
      } else {
        // ----------- PAUSE ----------
        isRunning = false;
        buttonEl.textContent = 'Start';
        clearInterval(intervalID);
        intervalID = null;
      }
    }

    // -----------------------------------------------------------------
    // Hook up the button.
    // -----------------------------------------------------------------
    buttonEl.addEventListener('click', toggleTimer);

    // Initial render (shows 00 and “Ready?”)
    render();
  </script>
</body>
</html>
